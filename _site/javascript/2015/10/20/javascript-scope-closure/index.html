
<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>LeftTree - Javascript Scope and Closures</title>
      <meta name="viewport" content="width=device-width">

      <!-- atom & rss feed -->
      <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
      <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
  </head>
  <body>
    <div class="site">
      <div class="sidebar" id="sidebar">
        <div class="header">
          <h1 class="title"><a href="http://lefttree.github.io"><img id="logo" src="/assets/themes/xiang/images/newLogo.jpg"></a></h1>
          <span class="tagline">Xiang Li</span>
        </div>
        <hr>
        <!--<div class="posts">-->
          <!--<ul class="posts-list">-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/python/2015/11/17/urllib-urllib2-request">-->
                  <!--<span class="post-date">17 Nov 2015</span>-->
                  <!--urllib, urllib2, requests-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/web/2015/11/10/contextMenu">-->
                  <!--<span class="post-date">10 Nov 2015</span>-->
                  <!--Javascript Context Menu - 自定义右键菜单-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/web/2015/11/01/microblog">-->
                  <!--<span class="post-date">01 Nov 2015</span>-->
                  <!--我的microblog上线了！-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/life/2015/10/22/the-7-habits">-->
                  <!--<span class="post-date">22 Oct 2015</span>-->
                  <!--高效能人士的7个习惯-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/javascript/2015/10/20/javascript-scope-closure">-->
                  <!--<span class="post-date">20 Oct 2015</span>-->
                  <!--Javascript Scope and Closures-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/tool/2015/10/09/chrome-extensions">-->
                  <!--<span class="post-date">09 Oct 2015</span>-->
                  <!--Chrome Extension 推荐-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/linux/2015/10/06/mount-remote-folder">-->
                  <!--<span class="post-date">06 Oct 2015</span>-->
                  <!--NFS Mount Remote Folder-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/web/2015/09/25/netease-music">-->
                  <!--<span class="post-date">25 Sep 2015</span>-->
                  <!--海外的用户正常听网易云音乐-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/reading/2015/08/24/%E4%B8%8D%E8%A6%81%E5%81%9A%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8">-->
                  <!--<span class="post-date">24 Aug 2015</span>-->
                  <!--不要做程序生成器-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/programming%20style/2015/08/20/Javascript-Style-Guide-Notes">-->
                  <!--<span class="post-date">20 Aug 2015</span>-->
                  <!--Javascript Style Guide Notes-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/python/2015/08/18/python-mutable-arguments">-->
                  <!--<span class="post-date">18 Aug 2015</span>-->
                  <!--Python Mutable Default Arguments-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/python/2015/08/13/python-dictionary-key">-->
                  <!--<span class="post-date">13 Aug 2015</span>-->
                  <!--Python Dictionary Key-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/python/2015/07/28/python-stack-queue">-->
                  <!--<span class="post-date">28 Jul 2015</span>-->
                  <!--Python stack and queue-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/web/2015/07/22/strict-mode">-->
                  <!--<span class="post-date">22 Jul 2015</span>-->
                  <!--About strict mode-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/javascript/2015/07/07/practical-patterns-for-creating-objects">-->
                  <!--<span class="post-date">07 Jul 2015</span>-->
                  <!--Practical patterns for createing objects-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/notes/2015/07/07/eloquent-js-notes">-->
                  <!--<span class="post-date">07 Jul 2015</span>-->
                  <!--Eloquent Javascript Notes-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/programming%20style/2015/06/18/git-workflow">-->
                  <!--<span class="post-date">18 Jun 2015</span>-->
                  <!--Git Workflow-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/frontend/2015/06/12/react-twoway-binding">-->
                  <!--<span class="post-date">12 Jun 2015</span>-->
                  <!--React Two-way Binding-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/frontend/2015/06/12/gulp-setup">-->
                  <!--<span class="post-date">12 Jun 2015</span>-->
                  <!--Gulp Setup-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/programming%20style/2015/06/07/git-commit-style">-->
                  <!--<span class="post-date">07 Jun 2015</span>-->
                  <!--Git commit style-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/web/2015/06/04/HTML5-Storage-Cache">-->
                  <!--<span class="post-date">04 Jun 2015</span>-->
                  <!--HTML5 Storage & Cache-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/programming%20style/2015/06/03/JS-Best-Practices">-->
                  <!--<span class="post-date">03 Jun 2015</span>-->
                  <!--Javascript Best Practices-->
                <!--</a>-->
              <!--</li>-->
            <!---->
              <!--<li class="post-link">-->
                <!--<a class="post-title" href="/web/2015/06/01/Javascript-theGoodParts">-->
                  <!--<span class="post-date">01 Jun 2015</span>-->
                  <!--Javascript Good Parts-->
                <!--</a>-->
              <!--</li>-->
            <!---->
          <!--</ul>-->
        <!--</div>-->
        <ul class="nav">
            
            
            


  
    
      
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/pages.html">Pages</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  



        </ul>
        <div class="footer">
          <span id="footer-links">
            <!--<a href="http://www.xiangli.me" class="footer-link">About</a> -->
            <!--<span class="separator">&bull;</span>-->
            <!--[><a href="" class="footer-link">Twitter</a> <span class="separator">&bull;</span><]-->
            <!--<a href="https://github.com/lefttree" class="footer-link">GitHub</a>-->
            <ul class="soc">
                <li><a class="soc-github" href="https://github.com/lefttree"></a></li>
                <li><a class="soc-facebook" href="https://www.facebook.com/xiang.li.3726"></a></li>
                <li><a class="soc-linkedin" href="https://www.linkedin.com/pub/xiang-li/47/639/77a"></a></li>
                <li><a class="soc-email1" href="mailto:bylixiang@gmail.com"></a></li>
                <li><a class="soc-rss soc-icon-last" href="http://lefttree.github.io/rss.xml"></a></li>
            </ul>
          </span>
        </div>
      </div>

        

<div class="content" id="home">
  <div id="sidebar-button">
    <img src="/assets/themes/xiang/images/sidebar-button.png">
  </div>
  <div id="post-info">
    <div id="cover-photo-container">
      <img id="cover-photo" src="/assets/themes/xiang/images/cover.jpg">
    </div>
    <div id="info-container">
      <h1 id="title">Javascript Scope and Closures</h1>
      <span id="date">20 Oct 2015</span>
    </div>
  </div>

  <div class="post">
    <h2 id="table-of-contents">Table of Contents</h2>

<ul>
<li><a href="#function-scope">Function Scope</a></li>
<li><a href="#inner-functions">Inner Functions</a></li>
<li><a href="#closures">Closures</a></li>
<li><a href="#how-closures-word-and-are-used">How closure work and are used</a>

<ul>
<li><a href="#keep-things-private">keep things private</a></li>
<li><a href="#why-closures-so-useful">Why closures so useful</a></li>
</ul></li>
<li><a href="#the-infamout-loop-problem">The Infamous Loop Problem</a></li>
<li><a href="#self-invoking-functions">Self Invoking Functions</a></li>
</ul>

<h2 id="function-scope">Function Scope</h2>

<p>Function scope means that everything between bracket operators {} is scoped <strong>as long as it is part of a function</strong>.</p>

<p>Function scope is used heavily in JavaScript. In fact, there is a common pattern to <strong>create a function just for the purpose of scope</strong>.</p>

<p>As an example, the standard advice for writing JQuery plugins is to use the following pattern:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Do things here - they are scoped</span>
<span class="p">}(</span><span class="nx">JQuery</span><span class="p">))</span>
</code></pre></div>
<h2 id="inner-functions">Inner Functions</h2>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">func1</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c1">//outer function</span>
    <span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> <span class="s2">&quot;foo&quot;</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">func2</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c1">//inner function</span>
        <span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> <span class="s2">&quot;bar&quot;</span><span class="p">;</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span> <span class="c1">//bar</span>
    <span class="p">}</span>

    <span class="nx">func2</span><span class="p">();</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span> <span class="c1">//foo</span>
<span class="p">}</span>
<span class="nx">func1</span><span class="p">();</span>
</code></pre></div>
<p>an inner function has access to the variables of the outer function as long as it does not declare variables with identical names (in which case it will overwrite the variables, but <strong>just within that function scope</strong>).</p>

<h2 id="closures">Closures</h2>

<p>A variable that is assigned to a function is a structure in memory that is used to represent the function.
Some Languages like JavaScript implement a slightly more complex setup for the structure. For these languages, the structure holds both <strong>the address of the function</strong> and <strong>its referencing environment</strong>.</p>

<p>Having access to the referencing environment means access to certain non-local variables, for example, the variables in its outer function.</p>

<p>JavaScript implementors refer to the referencing environment as the function&#39;s context. When the structure that points to a function also contains its original context (referencing environment), it is called a <em>closure</em>.</p>

<p><img src="http://doctrina.org/images/closure.png" alt="pic"></p>

<h2 id="how-closures-work-and-are-used">How closures work and are used</h2>

<p>when the inner function <em>lives longer than</em> the outer function, the inner function (i.e. the closure) will have access to state from that outer function that is not accessible anywhere else. </p>

<p>Therefore closures have the ability to implement something that is taken for granted in classical object oriented languages: <em>Private State</em>.</p>

<h3 id="keep-things-private">keep things private</h3>

<p>private state and methods are very useful somethins. It can be achieved in JS by using a closure:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">closure</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//This is a private variable</span>
    <span class="kd">var</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">{</span> <span class="c1">//This object being returned is assigned to closure</span>
        <span class="nx">getCounter</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">counter</span><span class="p">;},</span>
        <span class="nx">increment</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">inc</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">inc</span> <span class="o">!==</span> <span class="s1">&#39;number&#39;</span><span class="p">)</span>
                <span class="nx">inc</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

            <span class="nx">counter</span> <span class="o">+=</span> <span class="nx">inc</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}();</span>

<span class="nx">closure</span><span class="p">.</span><span class="nx">increment</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">closure</span><span class="p">.</span><span class="nx">getCounter</span><span class="p">());</span> <span class="c1">//10</span>
</code></pre></div>
<ul>
<li>The function is immediately invoked. we are not assigning the variable <em>closure</em> a function but the result of invoked function.</li>
<li>The result assigned to <em>closure</em> is an Object</li>
</ul>

<blockquote>
<p>The pattern of an inner function living longer than the outer function is the useful pattern for closures because it implements private state. The two closure functions within the object assigned to closure have access to counter. counter is private: It cannot be altered nor accessed except through the closure functions.</p>
</blockquote>

<h3 id="why-closures-so-useful">why closures so useful</h3>

<p>Javascript is asynchronicity with <em>callback</em> functions.</p>

<p>If the callback function is an inner function, it is a closure that is able to access variables in the outer function.</p>

<h4 id="problem-with-constructor-invocation-pattern">problem with <code>constructor invocation pattern</code></h4>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">createCallBack</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c1">//First function</span>
    <span class="k">return</span> <span class="k">new</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c1">//Second function</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="s2">&quot;Hello World&quot;</span><span class="p">;</span>

        <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c1">//Third function</span>
            <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="nx">createCallBack</span><span class="p">();</span> <span class="c1">//Invoke the function assigned to createCallBack</span>
</code></pre></div>
<p>When invoking the createCallBack variable, what gets passed to the window.onload event handler is the result of what is returned by the seond function operator, which is the code in the third function operator.  </p>

<p><strong>standard fix</strong> use <code>that</code></p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">createCallBack</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c1">//First function</span>
    <span class="k">return</span> <span class="k">new</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c1">//Second function</span>
        <span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="s2">&quot;Hello World&quot;</span><span class="p">;</span>

        <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c1">//Third function</span>
            <span class="nx">alert</span><span class="p">(</span><span class="nx">that</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>use closure to create seperate objects</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">createCallBack</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">init</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//First function</span>
    <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span> <span class="c1">//This object is created within the first function and is accessible</span>
                <span class="c1">//to the second function due to the closure</span>
        <span class="s1">&#39;message&#39;</span><span class="o">:</span><span class="nx">init</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c1">//Second function</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="nx">createCallBack</span><span class="p">(</span><span class="s2">&quot;First Message&quot;</span><span class="p">));</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="nx">createCallBack</span><span class="p">(</span><span class="s2">&quot;Second Message&quot;</span><span class="p">));</span>
</code></pre></div>
<h2 id="the-infamous-loop-problem">The infamous loop problem</h2>

<p>How many times have you created some sort of loop where you wanted to assign the value of i in some way, e.g. to an element, and found out it just returned the last value i had?</p>

<p>The faulty code</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">addLinks</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">link</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="mi">5</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">link</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">);</span>
        <span class="nx">link</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;Link &quot;</span> <span class="o">+</span> <span class="nx">i</span><span class="p">;</span>
        <span class="nx">link</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">alert</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
        <span class="p">};</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">link</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="nx">addLinks</span><span class="p">;</span>
</code></pre></div>
<p>it&#39;s not invoked, so the i reference to the i variable in for-loop, and it will all become 5.</p>

<p>What you should do instead is to create a closure.</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">addLinks</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">link</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="mi">5</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">link</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">);</span>
        <span class="nx">link</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;Link &quot;</span> <span class="o">+</span> <span class="nx">i</span><span class="p">;</span>
        <span class="nx">link</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="nx">alert</span><span class="p">(</span><span class="nx">num</span><span class="p">);</span>
            <span class="p">};</span>
        <span class="p">}(</span><span class="nx">i</span><span class="p">);</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">link</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="nx">addLinks</span><span class="p">;</span>
</code></pre></div>
<h2 id="self-invoking-functions">Self Invoking Functions</h2>

<p>Self-invoking functions are functions who execute immediately, and create their own closure.</p>

<p>The global object has an associated execution context. Additionally <strong>every invocation</strong> of a function establishes and enters <strong>a new execution context</strong>. The execution context is the dynamic counterpart to the static lexical scope.</p>

<p>The base of module pattern, can create private state and variable.</p>

<h2 id="reference">Reference</h2>

<ul>
<li><a href="http://doctrina.org/JavaScript:Why-Understanding-Scope-And-Closures-Matter.html">why understanding scope and closures matters</a></li>
<li><a href="http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/">expalining javascript scope and closures</a></li>
<li><a href="https://javascriptweblog.wordpress.com/2010/10/25/understanding-javascript-closures/">understanding javascript closures</a>

<ul>
<li>have good points</li>
</ul></li>
<li><a href="http://javascriptissexy.com/understand-javascript-closures-with-ease/">javascript is sexy</a></li>
</ul>

  </div>
  
    <ul class="tag_box inline">
      <li><i class="icon-folder-open"></i></li>
      
      


  
     
    	<li><a href="/categories.html#javascript-ref">
    		javascript <span>2</span>
    	</a></li>
    
  


    </ul>
    

  
    <ul class="tag_box inline">
      <li><i class="icon-tags"></i></li>
      
      


  
     
    	<li><a href="/tags.html#javascript-ref">javascript <span>10</span></a></li>
    
  



    </ul>
  
  <hr>  
  <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/tool/2015/10/09/chrome-extensions" title="Chrome Extension 推荐">&larr; Previous</a></li>
      
        <li><a href="/archive.html">Archive</a></li>
      
        <li class="next"><a href="/life/2015/10/22/the-7-habits" title="高效能人士的7个习惯">Next &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    
    var disqus_developer = 1;
    var disqus_shortname = 'lefttreegithubio'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




  </div>
</div>



    </div>
      <!-- bootstrap -->
      <link href="/assets/themes/xiang/css/bootstrap.2.2.2.min.css" rel="stylesheet">
      <!-- syntax highlighting CSS -->
      <link rel="stylesheet" href="/assets/themes/xiang/css/syntax.css">

      <!-- Custom CSS -->
      <link rel="stylesheet" href="/assets/themes/xiang/css/main.css">

      <!-- Responsive CSS -->
      <link rel="stylesheet" href="/assets/themes/xiang/css/responsive.css">

      <!-- Google Fonts -->
      <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700' rel='stylesheet' type='text/css'>
      <link href='//fonts.googleapis.com/css?family=Raleway:300,400,700' rel='stylesheet' type='text/css'>
    <script src="/assets/themes/xiang/scripts/responsive.js" type="text/javascript"></script>
    



  </body>
</html>

